<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Payment History Graph</title>
	<!-- Include Chart.js library -->
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	>>>>>>> e9da8bf0a2189a6a660886d35725dfbc0e0b1e54
</head>

<body>
	<div style="width: 80%; margin: auto;">
		<canvas id="paymentHistoryGraph"></canvas>
	</div>
	<script>
		// Function to fetch data from the API
		function fetchPaymentData() {
			///////////Just a dummy data it will be replaced on receiving response from api///////////////
			//////////////////////////////////////////////////////////////////////////////////////////
			const paymentDataList = [
				{amount: 100, numPayments: 5},
				{amount: 200, numPayments: 8},
				{amount: 300, numPayments: 12},
				{amount: 400, numPayments: 7},
				{amount: 500, numPayments: 15}
			];
			let amounts = paymentDataList.map(data => data.amount);
			let numPayments = paymentDataList.map(data => data.numPayments);
			fetch('/api/payment-history')
				.then(response => response.json())
				.then(paymentDataList => {
					amounts = paymentDataList.map(data => data.amount);
					numPayments = paymentDataList.map(data => data.numPayments);

					// Render the graph using the actual data from the API
					renderGraph(amounts, numPayments);
				})
				.catch(error => {
					renderGraph(amounts, numPayments);
					console.error('Error fetching data:', error);
				});
		}

		// Function to render the graph using Chart.js
		function renderGraph(amounts, numPayments) {
			const ctx = document.getElementById('paymentHistoryGraph').getContext('2d');
			new Chart(ctx, {
				type: 'bar',
				data: {
					labels: amounts,
					datasets: [{
						label: 'Number of Payments',
						data: numPayments,
						backgroundColor: 'rgba(75, 192, 192, 0.2)',
						borderColor: 'rgba(75, 192, 192, 1)',
						borderWidth: 1
					}]
				},
				options: {
					scales: {
						x: {
							title: {
								display: true,
								text: 'Payment Amount ($)'
							}
						},
						y: {
							title: {
								display: true,
								text: 'Number of Payments'
							}
						}
					}
				}
			});
		}

		// Call the function to fetch data from the API and render the graph when the page loads
		fetchPaymentData();
	</script>
</body>

</html>